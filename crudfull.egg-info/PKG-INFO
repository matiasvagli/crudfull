Metadata-Version: 2.4
Name: crudfull
Version: 0.1.0
Summary: Generador de CRUDs para FastAPI (work in progress)
Author-email: Matias Vagliviello <vaglimatias@gmail.com>
Requires-Python: >=3.10
Description-Content-Type: text/markdown
Requires-Dist: typer
Requires-Dist: jinja2
Requires-Dist: inflect
Requires-Dist: pydantic>=2.0.0
Requires-Dist: python-dotenv
Requires-Dist: fastapi
Requires-Dist: uvicorn[standard]
Requires-Dist: sqlalchemy
Requires-Dist: asyncpg
Requires-Dist: beanie
Requires-Dist: motor
Provides-Extra: lite
Requires-Dist: typer; extra == "lite"
Requires-Dist: jinja2; extra == "lite"
Requires-Dist: inflect; extra == "lite"
Provides-Extra: test
Requires-Dist: pytest; extra == "test"
Requires-Dist: pytest-asyncio; extra == "test"
Requires-Dist: httpx; extra == "test"
Provides-Extra: auth
Requires-Dist: python-jose[cryptography]; extra == "auth"
Requires-Dist: passlib[bcrypt]; extra == "auth"
Requires-Dist: python-multipart; extra == "auth"

# âš¡ï¸ CRUDFULL â€” FastAPI Project Generator

**CRUDFULL** te permite crear APIs REST completas en segundos, con arquitectura modular y soporte para mÃºltiples bases de datos.

## ğŸ¯ CaracterÃ­sticas

- ğŸš€ **Scaffolding de proyectos** - Crea proyectos FastAPI completos con un comando
- ğŸ—ï¸ **Arquitectura modular** - Cada recurso es auto-contenido (schemas, models, service, router)
- ğŸ”„ **Auto-registro de routers** - Los endpoints se registran automÃ¡ticamente en `main.py`
- ğŸ—„ï¸ **Multi-DB** - Soporte para SQL (PostgreSQL), MongoDB y Ghost (in-memory)
- ğŸ³ **Docker ready** - Genera `docker-compose.yml` y `Dockerfile` opcionales
- ğŸ” **AutenticaciÃ³n JWT** - Sistema de auth completo con un comando
- ğŸ§ª **Tests incluidos** - Tests automÃ¡ticos para cada recurso
- ğŸ“š **DocumentaciÃ³n automÃ¡tica** - FastAPI Swagger UI out-of-the-box
- âš™ï¸ **Context-aware** - Detecta automÃ¡ticamente la configuraciÃ³n del proyecto

---

## ğŸ“¦ InstalaciÃ³n

### InstalaciÃ³n completa (recomendada)
Por defecto, `crudfull` instala todo lo necesario para desarrollar:

```bash
pip install crudfull
```

Incluye:
- FastAPI + Uvicorn
- SQLAlchemy + AsyncPG (SQL)
- Beanie + Motor (MongoDB)
- Pydantic + Python-dotenv

### InstalaciÃ³n ligera (solo CLI)
Si solo querÃ©s el generador de cÃ³digo sin dependencias de runtime:

```bash
pip install crudfull[lite]
```

Solo incluye: `typer`, `jinja2`, `inflect`

### Herramientas de testing
Para agregar pytest y httpx:

```bash
pip install crudfull[test]
```

### AutenticaciÃ³n JWT
Para agregar soporte de autenticaciÃ³n:

```bash
pip install crudfull[auth]
```

---

## ğŸš€ Inicio RÃ¡pido

### 1. Crear un nuevo proyecto

```bash
crudfull new mi_tienda --db sql --docker
cd mi_tienda
```

Esto genera:
```
mi_tienda/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py              # FastAPI app con HTML de bienvenida
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â””â”€â”€ session.py       # ConfiguraciÃ³n de base de datos
â”‚   â””â”€â”€ core/                # (opcional, con auth)
â”œâ”€â”€ tests/
â”œâ”€â”€ crudfull.json            # ConfiguraciÃ³n del proyecto
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .gitignore
â”œâ”€â”€ docker-compose.yml       # (con --docker)
â”œâ”€â”€ Dockerfile               # (con --docker)
â””â”€â”€ .env                     # (con --docker)
```

### 2. Generar recursos (detecta DB automÃ¡ticamente)

```bash
crudfull generate resource products name:str price:float stock:int
crudfull generate resource users name:str email:str
crudfull generate resource orders user_id:int product_id:int quantity:int
```

Cada recurso genera:
```
app/
  products/
    __init__.py
    schemas.py      # Pydantic models
    models.py       # DB models (SQLAlchemy/Beanie)
    service.py      # LÃ³gica de negocio
    router.py       # Endpoints FastAPI (auto-registrado)
tests/
  products/
    test_products.py
```

### 3. Levantar el servidor

```bash
# Con Docker
docker-compose up -d

# O manualmente
pip install -r requirements.txt
uvicorn app.main:app --reload
```

VisitÃ¡ `http://localhost:8000` para ver la pÃ¡gina de bienvenida y `http://localhost:8000/docs` para la documentaciÃ³n interactiva.

---

## ğŸ” AutenticaciÃ³n

### Agregar autenticaciÃ³n JWT al proyecto

```bash
crudfull add auth
```

Esto genera:
```
app/
  auth/
    __init__.py
    schemas.py        # UserCreate, UserLogin, Token
    models.py         # User model
    service.py        # hash_password, create_token
    router.py         # /auth/register, /auth/login, /auth/me
    dependencies.py   # get_current_user
  core/
    security.py       # JWT config
```

### Instalar dependencias de auth

```bash
pip install crudfull[auth]
```

### Proteger rutas

```python
from fastapi import Depends
from app.auth.dependencies import get_current_user
from app.auth.models import User

@router.post("/products")
async def create_product(
    product: ProductCreate,
    current_user: User = Depends(get_current_user)
):
    return {"created_by": current_user.email, "product": product}
```

### Endpoints de autenticaciÃ³n

- `POST /auth/register` - Registrar nuevo usuario
- `POST /auth/login` - Login y obtener token JWT
- `GET /auth/me` - Obtener info del usuario actual (requiere token)

---

## ğŸ“š Comandos CLI

### `crudfull new`
Crea un nuevo proyecto FastAPI

```bash
crudfull new <nombre> --db [sql|mongo|ghost] [--docker]
```

**Opciones:**
- `--db`: Base de datos (sql, mongo, ghost). Default: sql
- `--docker`: Genera archivos Docker

**Ejemplo:**
```bash
crudfull new mi_api --db mongo --docker
```

### `crudfull generate resource`
Genera un recurso CRUD completo

```bash
crudfull generate resource <nombre> <campo1:tipo> <campo2:tipo> ...
```

**Tipos soportados:**
- `str`, `int`, `float`, `bool`
- `datetime`, `uuid`
- Agregar `?` para campos opcionales: `email:str?`

**Ejemplo:**
```bash
crudfull generate resource users name:str email:str age:int? created_at:datetime
```

### `crudfull add auth`
Agrega autenticaciÃ³n JWT al proyecto

```bash
crudfull add auth [--type jwt]
```

### `crudfull sync-routers run`
Sincroniza todos los routers existentes con `main.py`

```bash
crudfull sync-routers run
```

---

## ğŸ—„ï¸ Bases de Datos Soportadas

### SQL (PostgreSQL, MySQL, SQLite)
```bash
crudfull new mi_api --db sql
```

Usa SQLAlchemy Async + AsyncPG

**Variables de entorno:**
```env
DATABASE_URL=postgresql+asyncpg://user:password@localhost/dbname
```

### MongoDB
```bash
crudfull new mi_api --db mongo
```

Usa Beanie ODM + Motor

**Variables de entorno:**
```env
MONGO_URL=mongodb://localhost:27017
```

### Ghost (In-Memory)
```bash
crudfull new mi_api --db ghost
```

Sin base de datos real, ideal para prototipos y demos.

---

## ğŸ³ Docker

### Generar archivos Docker

```bash
crudfull new mi_api --db sql --docker
```

Esto crea:
- `docker-compose.yml` - OrquestaciÃ³n de servicios (app + DB)
- `Dockerfile` - Imagen de la aplicaciÃ³n
- `.env` - Variables de entorno

### Levantar con Docker

```bash
docker-compose up -d --build
```

La API estarÃ¡ disponible en `http://localhost:8000`

---

## âš™ï¸ ConfiguraciÃ³n del Proyecto

El archivo `crudfull.json` almacena la configuraciÃ³n del proyecto:

```json
{
  "project_name": "mi_tienda",
  "db": "sql"
}
```

Esto permite que `crudfull generate resource` detecte automÃ¡ticamente la base de datos sin necesidad de especificar `--db` cada vez.

---

## ğŸ§ª Testing

Los tests se generan automÃ¡ticamente para cada recurso:

```bash
pytest
```

Cada mÃ³dulo tiene sus propios tests en `tests/<modulo>/test_<modulo>.py`

---

## ğŸ“– Ejemplo Completo

```bash
# 1. Crear proyecto
crudfull new tienda --db sql --docker

# 2. Entrar al proyecto
cd tienda

# 3. Generar recursos
crudfull generate resource products name:str price:float stock:int
crudfull generate resource users name:str email:str
crudfull generate resource orders user_id:int product_id:int quantity:int

# 4. Agregar autenticaciÃ³n
crudfull add auth
pip install crudfull[auth]

# 5. Levantar con Docker
docker-compose up -d

# 6. Visitar la API
# http://localhost:8000 - PÃ¡gina de bienvenida
# http://localhost:8000/docs - DocumentaciÃ³n interactiva
```

---

## ğŸ› ï¸ Desarrollo

### Instalar en modo desarrollo

```bash
git clone https://github.com/TU-USUARIO/crudfull.git
cd crudfull
pip install -e .
```

---

## ğŸ“ Roadmap

- [x] Arquitectura modular
- [x] Project scaffolding (`crudfull new`)
- [x] Docker support
- [x] Context awareness (`crudfull.json`)
- [x] AutenticaciÃ³n JWT
- [ ] Migraciones (Alembic)
- [ ] OAuth2 (Google, GitHub)
- [ ] Relaciones entre modelos (ForeignKey)
- [ ] GraphQL support
- [ ] Admin panel

---

## ğŸ“„ Licencia

MIT

---

## ğŸ¤ Contribuir

Â¡Las contribuciones son bienvenidas! Por favor, abrÃ­ un issue o pull request.

---

**Hecho con â¤ï¸ por Matias Vagliviello**

```bash
mkdir crudfull_test
cd crudfull_test
---

## âš™ï¸ Uso del CLI

### ğŸ“ Ver versiÃ³n

```bash
crudfull version
```

---

## ğŸ§± Generar un recurso completo

```bash
crudfull generate resource <Nombre> <campos...> --db <motor>
```

Ejemplo de campos:  
`name:str age:int active:bool`

Motores disponibles:  
- `ghost` (default)
- `sql`
- `mongo`

---

### ğŸ‘» Modo GHOST (sin base de datos)

```bash
crudfull generate resource User name:str age:int --db ghost
```

Genera:
- `models/user.py`
- `services/user_service_ghost.py`
- `routers/user_router.py`

Perfecto para prototipos, pruebas y demos rÃ¡pidas.

---

### ğŸŸ¦ Modo SQL (SQLAlchemy Async)

```bash
crudfull generate resource Product title:str price:int --db sql
```

Genera:
- `models/product.py` (Pydantic)
- `models/product_sql.py` (SQLAlchemy)
- `services/product_service_sql.py`
- `routers/product_router.py`
- `database_examples/database_sql_example.py`

Listo para usar en FastAPI:

```python
from database_examples.database_sql_example import get_db
```

**CreaciÃ³n de tablas:**
Se genera un script automÃ¡tico en `scripts/create_tables.py`. EjecÃºtalo para inicializar la DB:

```bash
python scripts/create_tables.py
```

**Tests automÃ¡ticos:**
Se generan tests en `tests/`. Para correrlos:

```bash
pytest
```

---

### ğŸŸ© Modo Mongo (Beanie ODM)

```bash
crudfull generate resource Order amount:int code:str --db mongo
```

Genera:
- `models/order.py`
- `models/order_mongo.py`
- `services/order_service_mongo.py`
- `routers/order_router.py`
- `database_examples/database_mongo_example.py`

Inicializa con:

```python
from database_examples.database_mongo_example import init_db
```

---

## ğŸ“ Estructura generada

```
models/
services/
routers/
database_examples/
```

Backend modular, limpio y escalable.

---

## ğŸ§™â€â™‚ï¸ Arquitectura de Templates

```
crudfull/
  templates/
    ghost/
    sql/
    mongo/
```

---

## ğŸ› ï¸ Roadmap futuro

- âœ… ğŸ§ª GeneraciÃ³n automÃ¡tica de tests (pytest + httpx)
- ï¿½ **AutenticaciÃ³n**: Comando `crudfull add auth` (Login, JWT, Users).
- ğŸ”— **Relaciones**: Soporte para Foreign Keys (ej: `user_id:int:fk=User`).
- ğŸ¨ **Templates Personalizables**: Usar plantillas propias desde `.crudfull/templates`.
- ï¿½ğŸ“¦ Comando para generar un proyecto FastAPI completo (`crudfull new project`)
- ğŸ—„ï¸ Compatibilidad con mÃ¡s ORMs (Tortoise ORM, Prisma, SQLModel)
- âš™ï¸ ParÃ¡metros avanzados: soft deletes, timestamps, UUIDs.
- ğŸš€ PublicaciÃ³n oficial en PyPI
- ğŸ“˜ DocumentaciÃ³n completa con MkDocs + GH Pages
- ğŸ›¡ï¸ Validaciones avanzadas, manejo de errores y respuestas estÃ¡ndar
- ğŸ”Œ IntegraciÃ³n con OpenAPI/Swagger extendida
- ğŸ§° GeneraciÃ³n de CLI para testear CRUDs automÃ¡ticamente

---

## ğŸ‘¨â€ğŸ’» Autores

**CRUDfull** fue creado con pasiÃ³n y cafÃ© por:

- **MatÃ­as Vagliviello** â€” Desarrollador & Arquitecto del proyecto  


> *â€œHecho en Argentina, para el mundo. Pensado para que crear CRUDs sea tan rÃ¡pido como escribir una idea.â€*


QuÃ© le falta para ser "Pro"? (Ideas para el futuro) Si quieres llevarla al siguiente nivel, aquÃ­ tienes mi lista de deseos:

Relaciones (Foreign Keys):
Ahora generamos recursos aislados. Lo mÃ¡s difÃ­cil (y valioso) serÃ­a poder decir: crudfull generate resource Post title:str user_id:int:fk=User. Eso serÃ­a un game changer.
Templates Personalizables:
Que el usuario pueda tener una carpeta .crudfull/templates en su proyecto y que la librerÃ­a use esos templates en lugar de los default. AsÃ­ cada equipo adapta el estilo de cÃ³digo a sus normas.
AutenticaciÃ³n:
Un comando crudfull add auth que te genere un sistema bÃ¡sico de login/JWT.
