# {{ project_name }}

API REST generada con [crudfull](https://github.com/matiasvagli/crudfull)

## ğŸš€ Quick Start

### 1. Configurar variables de entorno

```bash
cp .env.example .env
```

> **Nota:** El archivo `.env.example` viene con credenciales **hardcodeadas para desarrollo rÃ¡pido**. 
> EstÃ¡n configuradas para funcionar directamente con `docker-compose.dev.yml`.
> **CambiÃ¡ estas credenciales en producciÃ³n.**

{% if db == 'sql' %}
### 2. Levantar base de datos PostgreSQL

```bash
docker compose -f docker-compose.dev.yml up -d
```

Esto levanta PostgreSQL con:
- Usuario: `devuser`
- Password: `devpass`
- Base de datos: `devdb`
- Puerto: `5432`

{% elif db == 'mongo' %}
### 2. Levantar base de datos MongoDB

```bash
docker compose -f docker-compose.dev.yml up -d
```

Esto levanta MongoDB con:
- Usuario: `devuser`
- Password: `devpass`
- Puerto: `27017`

> **âš ï¸ Importante para MongoDB:** 
> La aplicaciÃ³n arrancarÃ¡ sin errores, pero **necesitÃ¡s generar al menos un recurso** 
> o agregar autenticaciÃ³n para que Beanie registre modelos:
> 
> ```bash
> # OpciÃ³n 1: Generar un recurso
> crudfull generate resource users name:str email:str
> 
> # OpciÃ³n 2: Agregar autenticaciÃ³n
> crudfull add auth
> ```
> 
> Sin modelos registrados, la app funciona pero no podrÃ¡s usar la base de datos.

{% endif %}
### 3. Instalar dependencias

```bash
pip install -r requirements.txt
```

### 4. Correr la aplicaciÃ³n

```bash
uvicorn app.main:app --reload
```

La API estarÃ¡ disponible en:
- **Docs interactivos:** http://localhost:8000/docs
- **API:** http://localhost:8000

## ğŸ“¦ Modo ProducciÃ³n (Docker completo)

Si generaste el proyecto con `--docker`, podÃ©s correr todo en contenedores:

```bash
docker compose up -d --build
```

> **âš ï¸ Importante:** En producciÃ³n, cambiÃ¡ las credenciales en `docker-compose.yml` o usÃ¡ variables de entorno.

## ğŸ§ª Tests

```bash
pytest
```

## ğŸ“ Estructura del Proyecto

```
{{ project_name }}/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py              # Punto de entrada de la aplicaciÃ³n
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â””â”€â”€ session.py       # ConfiguraciÃ³n de base de datos
â”‚   â””â”€â”€ [recursos]/          # MÃ³dulos generados con crudfull
â”‚       â”œâ”€â”€ models.py
â”‚       â”œâ”€â”€ schemas.py
â”‚       â”œâ”€â”€ repository.py   # Nuevo layer de acceso a datos
â”‚       â”œâ”€â”€ service.py
â”‚       â””â”€â”€ router.py
â”œâ”€â”€ tests/                   # Tests generados automÃ¡ticamente
â”œâ”€â”€ .env.example             # Variables de entorno (template)
â”œâ”€â”€ docker-compose.dev.yml   # Solo DB para desarrollo local
{% if db != 'ghost' %}â”œâ”€â”€ docker-compose.yml       # App + DB para producciÃ³n{% endif %}
â””â”€â”€ requirements.txt
```

## ï¿½ PatrÃ³n Repository

Se aÃ±adiÃ³ una capa de **Repository** para abstraer el acceso a datos y desacoplar los servicios de la implementaciÃ³n concreta de la base de datos (MongoDB, SQL o Ghost). Cada recurso ahora incluye `repository.py` que expone mÃ©todos CRUD y es inyectado en los servicios.


## ï¿½ğŸ”§ Generar nuevos recursos

```bash
crudfull generate resource products name:str price:float stock:int
```

Esto genera automÃ¡ticamente:
- Modelo de base de datos
- Schemas de Pydantic
- CRUD completo
- Router con endpoints REST
- Tests

## ğŸ“ Variables de Entorno

El archivo `.env.example` incluye:

{% if db == 'sql' %}
- `DATABASE_URL`: ConexiÃ³n a PostgreSQL
- `POSTGRES_USER`, `POSTGRES_PASSWORD`, `POSTGRES_DB`: Credenciales de la DB
{% elif db == 'mongo' %}
- `DATABASE_URL`: ConexiÃ³n a MongoDB
- `MONGO_INITDB_ROOT_USERNAME`, `MONGO_INITDB_ROOT_PASSWORD`: Credenciales de la DB
{% endif %}
- `SECRET_KEY`: Clave secreta para JWT (si usÃ¡s autenticaciÃ³n)

**Para desarrollo:** Los valores por defecto funcionan con `docker-compose.dev.yml`

**Para producciÃ³n:** CambiÃ¡ todas las credenciales y usÃ¡ valores seguros

## ğŸ” Agregar AutenticaciÃ³n

```bash
crudfull add auth --type jwt
```

Esto agrega:
- Sistema de usuarios
- Login/Register
- JWT tokens
- ProtecciÃ³n de rutas

---

Generado con â¤ï¸ por [crudfull](https://github.com/matiasvagli/crudfull)
